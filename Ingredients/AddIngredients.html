<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Inventory PoC</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
    </style>
</head>

<body>
    <div class="container mx-auto p-4 md:p-8 max-w-xl">
        <div class="bg-gradient-to-br from-green-50 via-white to-blue-50 rounded-xl shadow-lg p-6 md:p-8">
            <h1 class="text-3xl font-extrabold text-green-700 text-center mb-6">Kitchen Inventory</h1>
            <p class="text-blue-600 text-center mb-8">A proof of concept for your Senior Design project.</p>

            <!-- Add New Item Section -->
            <div class="bg-indigo-50 p-6 rounded-lg shadow-inner mb-6">
                <h2 class="text-xl font-semibold text-blue-700 mb-4">Add New Item</h2>
                <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4">
                    <input type="text" id="itemNameInput" placeholder="Item name (e.g., Milk)" class="flex-grow w-full px-4 py-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <input type="number" id="itemQuantityInput" placeholder="Quantity" value="1" min="1" class="w-24 px-4 py-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <button id="addItemBtn" class="bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold px-6 py-2 rounded-md hover:from-green-600 hover:to-blue-600 transition-colors duration-200 w-full sm:w-auto">Add Item</button>
                </div>
            </div>

            <!-- Inventory List Section -->
            <div id="inventoryList" class="space-y-4">
                <ul class="space-y-2"></ul>
            </div>

            <!-- No Items Message -->
            <p id="noItemsMessage" class="text-center text-blue-400 mt-8 hidden">Your inventory is empty. Add some items to get started!</p>
        </div>
    </div>


    <script>
        let inventory = [];

        const itemNameInput = document.getElementById('itemNameInput');
        const itemQuantityInput = document.getElementById('itemQuantityInput');
        const addItemButton = document.getElementById('addItemBtn');
        const inventoryList = document.getElementById('inventoryList').querySelector('ul');
        const noItemsMessage = document.getElementById('noItemsMessage');

        // Function to save inventory to localStorage
        const saveInventory = () => {
            localStorage.setItem('kitchenInventory', JSON.stringify(inventory));
        };

        // Function to load inventory from localStorage
        const loadInventory = () => {
            const storedInventory = localStorage.getItem('kitchenInventory');
            if (storedInventory) {
                inventory = JSON.parse(storedInventory);
            }
        };

        // Function to render the inventory list
        const renderInventory = () => {
            inventoryList.innerHTML = '';

            if (inventory.length === 0) {
                noItemsMessage.classList.remove('hidden');
            } else {
                noItemsMessage.classList.add('hidden');
            }

            inventory.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'flex justify-between items-center bg-gray-100 p-2 rounded-md';
                li.innerHTML = `
                        <span>${item.name} - ${item.quantity}</span>
                        <button class="bg-red-500 text-white px-2 py-1 rounded-md hover:bg-red-600" data-index="${index}">Remove</button>
                    `;
                inventoryList.appendChild(li);
            });
            
            inventoryList.querySelectorAll('use-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    inventory.splice(index, 1);
                    saveInventory();
                    renderInventory();
                });
            });

            inventoryList.querySelector('.restock-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.target.getAttribute('data-index');
                    inventory[index].quantity += 1;
                    saveInventory();
                    renderInventory();
                });
            });
        };

        // Function to add an item
        const addItem = () => {
            const name = itemNameInput.value.trim();
            const quantity = parseInt(itemQuantityInput.value.trim(), 10);
            if (name && !isNaN(quantity) && quantity > 0) {
                // Check if item already exists
                const existingItem = inventory.find(item => item.name.toLowerCase() === name.toLowerCase());
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    inventory.push({
                        name: name.charAt(0).toUpperCase() + name.slice(1).toLowerCase(), // Capitalize first letter
                        quantity: quantity
                    });
                }
                itemNameInput.value = '';
                itemQuantityInput.value = '';
                saveInventory();
                renderInventory();
            }
        }

        // Function to use an item
        const useItem = (index) => {
            if (inventory[index].quantity > 0) {
                inventory[index].quantity -= 1;
                if (inventory[index].quantity === 0) {
                    inventory.splice(index, 1);
                }
                saveInventory();
                renderInventory();
            }
        };

        // Function to restock an item
        const restockItem = (index) => {
            inventory[index].quantity += 1;
            saveInventory();
            renderInventory();
        };

        // Event listener for the "Add Item" button
        addItemButton.addEventListener('click', addItem);
        // Event listener for the Enter key on the input fields
        itemNameInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                addItem();
            }
        });

        // Initial load and render
        loadInventory();
        renderInventory();

    </script>
